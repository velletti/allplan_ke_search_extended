{namespace allplan = Allplan\AllplanKeSearchExtended\ViewHelpers}

<f:layout name="Backend/Default" />

<f:section name="content">
    <div>

        <h2>Modified by allplan_ke_search_extended</h2>
        <em>(allplan_ke_search_extended/Resources/Private/Templates/BackendModule/LastIndexingReport.html)</em>

        <h2 class="uppercase">
            <f:translate key="LLL:EXT:ke_search/Resources/Private/Language/locallang_mod.xlf:function6" />
        </h2>

        <f:comment>
            <!-- =======================================================================================================
            Www
            ======================================================================================================== -->
        </f:comment>

        <f:comment><!-- Events (EXT:jv_events) --></f:comment>
        <f:variable name="headline" value="Events (EXT:jv_events)"/>
        <f:variable name="indexer_type" value="jv_events"/>
        <f:variable name="logEntries"><allplan:lastIndexingReport indexerType="{indexer_type}" /></f:variable>
        <f:render section="subContent" arguments="{_all}" />


        <f:comment>
            <!-- =======================================================================================================
            Connect
            ======================================================================================================== -->
        </f:comment>

        <f:comment><!-- Elearning lessons (videos) (EXT:marit_elearning) --></f:comment>
        <f:variable name="headline" value="Elearning lessons (videos) (EXT:marit_elearning)"/>
        <f:variable name="indexer_type" value="marit_elearning_lessons"/>
        <f:variable name="logEntries"><allplan:lastIndexingReport indexerType="{indexer_type}" /></f:variable>
        <f:render section="subContent" arguments="{_all}" />

        <f:comment><!-- Elearning documents (EXT:marit_elearning) --></f:comment>
        <f:variable name="headline" value="Elearning documents (EXT:marit_elearning)"/>
        <f:variable name="indexer_type" value="marit_elearning_documents"/>
        <f:variable name="logEntries"><allplan:lastIndexingReport indexerType="{indexer_type}" /></f:variable>
        <f:render section="subContent" arguments="{_all}" />

        <f:comment><!-- Forum (EXT:mm_forum) --></f:comment>
        <f:variable name="headline" value="Forum (EXT:mm_forum)"/>
        <f:variable name="indexer_type" value="mm_forum"/>
        <f:variable name="logEntries"><allplan:lastIndexingReport indexerType="{indexer_type}" /></f:variable>
        <f:render section="subContent" arguments="{_all}" />


        <f:comment>
            <!-- =======================================================================================================
            Miscellaneous
            ======================================================================================================== -->
        </f:comment>

        <f:comment><!-- Allplan Online Help --></f:comment>
        <f:variable name="headline" value="Allplan Online Help"/>
        <f:variable name="indexer_type" value="allplan_online_help"/>
        <f:variable name="logEntries"><allplan:lastIndexingReport indexerType="{indexer_type}" /></f:variable>
        <f:render section="subContent" arguments="{_all}" />


    </div>
</f:section>

<f:section name="subContent">
    <f:if condition="{logEntries}">
        <f:then>
            <h3>{headline}</h3>
            <table class="table table-striped table-hover">
                <tr>
                    <th>Log time</th>
                    <th>Details</th>
                </tr>
                <f:for each="{logEntries}" as="logEntry">
                    <tr>
                        <td style="vertical-align:top;">
                            <f:format.date format="d.m.y">{logEntry.tstamp}</f:format.date><br>
                            <f:format.date format="H:i:s">{logEntry.tstamp}</f:format.date>
                        </td>
                        <td><pre>{logEntry.details}</pre></td>
                    </tr>
                </f:for>
            </table>

        </f:then>
        <f:else><f:comment><!-- No report entries found for '{headline} (indexer_type)'.<hr> --></f:comment></f:else>
    </f:if>
</f:section>